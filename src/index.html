<!DOCTYPE html>
<html>
  <head>
    <title>vc100</title>
    <style>
      @font-face {
      font-family: 'gridmono';
      src: URL('gridmono_1_1_1.ttf') format('truetype');
}
      body { color: green; background-color: black; margin: 0; padding-left: 2rem; font-family: monospace; }
      .screen {font-family: 'gridmono', Fallback, monospace; width: 100%; font-size: 1.9vw; margin:0;}
      div.msg {
        color: white;
        background-color: black;
        display: none;
      }
    </style>
  </head>
  <body>
    <pre class='screen' id='screen'></pre>
    <ul id="messages"></ul>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io()
      const screen = new Array(25).fill('');
      socket.on('background', function(msg) {
      document.body.style.backgroundColor = msg
  })
    const render = (lines) => {
      return lines.reduce((acc, cur) => acc.concat(`${cur}\n`), '');
    }

    socket.on('line', function(line) {
      screen[line.line -1] = line.string;
      console.log(line);
      const screenElement = document.getElementById(`screen`);
      screenElement.textContent = render(screen);
  })

    </script>
    <div class="msg" id="msg4" style="position: fixed;top: 1em;left: 18em;">This is message 3</div>
    <div class="msg" id="msg3" style="position: fixed;top: 1em;left: 15em;">This is message 3</div>

  </body>
</html>
